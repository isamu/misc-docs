# Clawdbot 概要

## Clawdbot とは

Clawdbot は、複数のメッセージングプラットフォームを統合するパーソナル AI アシスタントプラットフォームです。ユーザーのデバイス上でローカルに動作し、WhatsApp、Telegram、Discord、Slack、Signal、iMessage などの主要なメッセージングサービスを単一の AI エージェントに接続します。

### 主な特徴

- **マルチチャネル対応**: 10以上のメッセージングプラットフォームを単一インターフェースで統合
- **ローカルファースト**: Gateway がユーザーのマシン上で動作（デフォルトで `127.0.0.1:18789`）
- **常時稼働**: Pi エージェントランタイムによる自律的な AI 推論
- **プラグイン拡張可能**: TypeScript ベースの拡張システム
- **マルチモーダル対応**: 画像、音声、動画、PDF などのメディア処理
- **音声機能**: Voice Wake（音声起動）、Talk Mode、TTS（テキスト読み上げ）

## ハイレベルアーキテクチャ

```
┌─────────────────────────────────────────────────────────────────┐
│                    メッセージングチャネル                         │
│  WhatsApp │ Telegram │ Discord │ Slack │ Signal │ iMessage │... │
└─────────────────────────────┬───────────────────────────────────┘
                              │
                              ▼
                    ┌─────────────────┐
                    │    Gateway      │
                    │  (コントロール   │
                    │   プレーン)     │
                    │  WebSocket      │
                    │  127.0.0.1:18789│
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
    ┌─────────┐        ┌─────────┐        ┌─────────┐
    │   CLI   │        │  macOS  │        │  iOS/   │
    │clawdbot │        │   App   │        │ Android │
    └────┬────┘        └────┬────┘        └────┬────┘
         │                   │                   │
         ▼                   ▼                   ▼
    ┌─────────────────────────────────────────────┐
    │            Pi Agent Runtime                 │
    │  ┌─────────┐ ┌─────────┐ ┌─────────┐       │
    │  │  Tools  │ │ Skills  │ │ Memory  │       │
    │  └─────────┘ └─────────┘ └─────────┘       │
    └─────────────────────────────────────────────┘
```

## コアコンポーネント

### 1. Gateway（ゲートウェイ）

Gateway は Clawdbot の心臓部で、長時間稼働する WebSocket サーバーとして機能します。

**責務:**
- 全メッセージングチャネルの接続管理
- インバウンドメッセージのエージェントへのルーティング
- アウトバウンドレスポンスのチャネルへの配信
- セッション、プレゼンス、設定の追跡
- 型付き WebSocket API の公開

### 2. Agent（エージェント）

Pi Agent ランタイムを埋め込んだ AI 処理エンジンです。

**機能:**
- 複数の LLM プロバイダー対応（Anthropic、OpenAI、Google、GitHub Copilot など）
- ツール実行（Bash、ブラウザ制御、Canvas など）
- ストリーミングレスポンス
- コンテキスト管理とセッション永続化

### 3. Channels（チャネル）

各メッセージングプラットフォームとの接続を抽象化するレイヤーです。

**統一インターフェース:**
- メッセージ送受信
- メディア処理
- 許可リスト管理
- グループルーティング

### 4. Plugins（プラグイン）

機能拡張のための TypeScript モジュールシステムです。

**拡張可能な領域:**
- Gateway RPC メソッド
- Agent ツール
- CLI コマンド
- バックグラウンドサービス

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| 言語 | TypeScript (ESM) |
| ランタイム | Node.js 22+, Bun（開発用） |
| ビルド | tsc (TypeScript Compiler) |
| パッケージ管理 | pnpm |
| リンティング | Oxlint |
| フォーマット | Oxfmt |
| テスト | Vitest + V8 カバレッジ |
| IPC | WebSocket |
| 設定 | JSON5 + Zod バリデーション |
| データベース | SQLite（セッション）、LanceDB（メモリ、オプション） |

## サポートプラットフォーム

### ネイティブアプリ

- **macOS**: メニューバーアプリ（SwiftUI）
- **iOS**: ノードアプリ（Swift）
- **Android**: ノードアプリ（Kotlin）

### サーバー/CLI

- **Linux**: Docker、systemd、または直接実行
- **Windows**: WSL2 経由
- **Raspberry Pi**: ARM サポート

## ユースケース

1. **パーソナルアシスタント**: すべてのメッセージアプリから単一の AI にアクセス
2. **自動化**: Cron ジョブ、Webhook によるタスク自動化
3. **チームコラボレーション**: Slack/Teams 経由でのチーム支援
4. **開発者ツール**: Bash 実行、ブラウザ自動化、コード支援

## 次のステップ

- [アーキテクチャ詳細](./02-architecture.md) - 詳細なシステム設計
- [実装詳細](./03-implementation.md) - コードベースの深掘り
- [機能一覧](./04-features.md) - 全機能の詳細説明
- [拡張ガイド](./05-extension-guide.md) - プラグイン開発方法
